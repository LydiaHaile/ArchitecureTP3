version: "2"
services:
  orient-node-0:
    image: orientdb:2.2.30
    command: dserver.sh
    volumes:
      - ./config:/opt/orientdb/config
      - ./databases:/opt/orientdb/databases
      - ./backup:/opt/orientdb/backup
    environment:
      ORIENTDB_ROOT_PASSWORD: password
      ORIENTDB_NODE_NAME: orient-node-0
    ports:
      - 2480:2480
      - 2424:2424

  orient-node-1:
    image: orientdb:2.2.30
    command: dserver.sh
    volumes:
      - ./config:/opt/orientdb/config
      - ./databases:/opt/orientdb/databases
      - ./backup:/opt/orientdb/backup
    environment:
      ORIENTDB_ROOT_PASSWORD: password
      ORIENTDB_NODE_NAME: orient-node-1
    depends_on:
      - orient-node-0

  orient-node-2:
      image: orientdb:2.2.30
      command: dserver.sh
      volumes:
        - ./config:/opt/orientdb/config
        - ./databases:/opt/orientdb/databases
        - ./backup:/opt/orientdb/backup
      environment:
        ORIENTDB_ROOT_PASSWORD: password
        ORIENTDB_NODE_NAME: orient-node-2
      depends_on:
        - orient-node-0